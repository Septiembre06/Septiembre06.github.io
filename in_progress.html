<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Partida en Transcurso - Impostor Caney</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üïµÔ∏è</text></svg>">
    <style>
        html,body{
            height:100%;
            margin:0;
        }
        body {
            font-family: 'Arial', sans-serif;
            background-color: #1a1a1a;
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 20px;
        }
        .card {
            width:100%;
            max-width:720px;
            background:#2a2a2a;
            padding:30px 20px;
            border-radius:12px;
            box-shadow:0 6px 30px rgba(0,0,0,0.6);
        }
        h1{
            color:#ff4444;
            font-size:48px;
            margin:0 0 20px 0;
            text-shadow: 0 0 10px rgba(255,68,68,0.5);
        }
        #timer{
            font-size:36px;
            color:#fff;
            background:rgba(0,0,0,0.15);
            display:inline-block;
            padding:10px 20px;
            border-radius:8px;
        }
        .controls{margin-top:14px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
        .controls button{padding:10px 16px; font-size:16px; border-radius:8px; border:none; cursor:pointer}
        #pause-btn{background:#777; color:#fff}
        #pause-btn.paused{background:#44aa44}
        #add-time-btn{background:#444; color:#fff}
        button#start-voting-btn{
            margin-top:0px;
            padding:12px 22px;
            font-size:18px;
            background:#ff4444;
            color:#fff;
            border:none;
            border-radius:8px;
            cursor:pointer;
            opacity:0.6;
        }
        button#start-voting-btn.ready{opacity:1}
        @media (max-width:480px){
            h1{font-size:32px}
            #timer{font-size:28px}
            .card{padding:20px}
            .controls button{width:100%; max-width:260px; margin:5px 0}
        }
    </style>
</head>
<body>
    <div class="card">
        <h1>Partida en transcurso</h1>
        <div id="timer">02:00</div>
        <div class="controls">
            <button id="pause-btn">Parar tiempo</button>
            <button id="add-time-btn">A√±adir tiempo (+30s)</button>
            <button id="start-voting-btn" disabled>Iniciar Votaci√≥n</button>
        </div>
    </div>

    <script>
        // Countdown de 2 minutos (120 segundos)
        let totalSeconds = 120;
        const timerEl = document.getElementById('timer');
        let intervalId;
        let isPaused = false;

        function formatTime(s){
            const mm = Math.floor(s/60).toString().padStart(2,'0');
            const ss = (s%60).toString().padStart(2,'0');
            return `${mm}:${ss}`;
        }

        function tick(){
            timerEl.textContent = formatTime(totalSeconds);
            if(totalSeconds <= 0){
                clearInterval(intervalId);
                // Cuando termine, dejar en 00:00 y habilitar bot√≥n de votaci√≥n
                timerEl.textContent = '00:00';
                const btn = document.getElementById('start-voting-btn');
                if(btn){
                    btn.disabled = false;
                    btn.classList.add('ready');
                }
                // Disable pause/add buttons when finished
                const p = document.getElementById('pause-btn'); if(p) p.disabled = true;
                const a = document.getElementById('add-time-btn'); if(a) a.disabled = true;
                return;
            }
            totalSeconds--;
        }

        // Mostrar inicialmente y comenzar
        timerEl.textContent = formatTime(totalSeconds);
        intervalId = setInterval(tick,1000);

        // Pause / Resume
        const pauseBtn = document.getElementById('pause-btn');
        pauseBtn.addEventListener('click', function(){
            if(!isPaused){
                clearInterval(intervalId);
                isPaused = true;
                pauseBtn.textContent = 'Reanudar tiempo';
                pauseBtn.classList.add('paused');
                // Habilitar bot√≥n de iniciar votaci√≥n al pausar
                const btn = document.getElementById('start-voting-btn');
                if(btn){
                    btn.disabled = false;
                    btn.classList.add('ready');
                }
            } else {
                intervalId = setInterval(tick,1000);
                isPaused = false;
                pauseBtn.textContent = 'Parar tiempo';
                pauseBtn.classList.remove('paused');
                // Opcional: deshabilitar al reanudar, pero por ahora dejar habilitado
            }
        });

        // A√±adir tiempo (+30s)
        const addBtn = document.getElementById('add-time-btn');
        addBtn.addEventListener('click', function(){
            totalSeconds += 30;
            // Update display immediately
            timerEl.textContent = formatTime(totalSeconds);
        });

        // Evento del bot√≥n iniciar votaci√≥n
        const startBtn = document.getElementById('start-voting-btn');
        if(startBtn){
            startBtn.addEventListener('click', function(){
                // Redirigir a la p√°gina de votaci√≥n
                window.location.href = 'voting.html';
            });
        }
    </script>
</body>
</html>